 Class Monitor

 I worked on this project as part of the Network Everything Class at NYU Abu Dhabi.

 Description:

 The idea of the project was to create a way of monitoring the activity in a classroom. I wanted to know how "active" the class was during the day. Below is a description of how I used an arduino Ethernet and node-express server to create a "monitoring device" that tracked how often people talked in a room.

 The Hardware

 Arduino Ethernet
 Wifi Router
 Breakboard
 Sparkfun 
 <a href = "https://www.adafruit.com/products/1713" >Adafruit Mic Sensor Module</a>


 The Software Stack:
 Node
 Express
 Arduino with the Ethernet Library



Wiring the Hardware:

Connecting the mic sensor to the arduino is pretty straight forward. <a href="https://learn.adafruit.com/adafruit-agc-electret-microphone-amplifier-max9814/wiring-and-test">The tutorial by Adafruit is very helpful in explaining how to connect the microphone to the arduino board. </a> Depending on your ISP network configuration, connecting the arduino to the internet might prove to be tricky.The tutorial at <a href = "http://www.instructables.com/id/Arduino-Ethernet-Shield-Tutorial/"> Instractubles</a> does a good job in explaining how to wire up the arduino ethernet shield so it connects to the internet.

The Software Logic:

Part 1 Arduino Code:

Monitoring the Room
 
The Arduino is running four main functions. The first one is the checkMicLevel function. This function reads the analog value at A0 (Being generated by the Mic) and converts it to a positive voltage value. This voltage value corresponds to the "loudness" of the noises picked up by the mic. The second function is the updateSecondsActive. This function triggers a counter when voltage read by checkMIcLevel crosses a certain threshold. Once the noise level returns to its orginal state below the threshhold, the counter is added to the global variable SecondsActive which keeps track of how long people have been talking in the room.

Reporting the Results

The Arduino also runs a web client. This client sends the value of the SecondsActive variable to the node-express app every 10 seconds.


Part 2 The Node App

This is a simple node-express application. I am running three routes on the application. Two get routes and one post route. The post route receives post requests from the arduino. The post request contains a secondsActive variable. This variable is stored on the server and updated everytime the server receives a post request. The first get route serves static html/javascript files to a web browser client. The third and final route is an API route which serves as a way of getting the secondsActive variable to the web client. This is done through Javascript/Jquery. In the main.js file, I have a function making Ajax requests to the API route. This allows me to update the HTML page without asking the web client to refresh.

